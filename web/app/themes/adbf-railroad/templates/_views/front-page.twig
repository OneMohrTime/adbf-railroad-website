{# -- Base page layout -- #}
{# ----------------------------------------------------------------- #}
{% extends "_base/html/_base.twig" %}

{# -- Page Variables -- #}

{% set relatedPages = post.meta('related_pages') %}
{% set railMaps     = post.meta('rail_maps') %}
{% set featuredPage = post.meta('featured_page') %}

{# -- Page Template -- #}

{% block content %}

    <section class="o-section -full-width -is-banner">
        {% include '_components/banner--primary.twig' with {
            params: {
                eyebrow: post.banner_eyebrow,
                image: Image(post.banner_image),
                headline: post.banner_headline ? post.banner_headline : post.title,
                body: post.banner_description,
                links: post.meta('banner_links'),
            }
        } only %}
    </section>

    <section class="o-section -is-content">

        <div class="c-wysiwyg">
            {{ post.content }}
        </div>

        {% if relatedPages is defined and relatedPages is not empty %}
        <ul class="c-list">
            {% for item in relatedPages %}
                <li class="c-list__item">
                    {% include '_elements/link.twig' with {
                        params: {
                            isExternal: (item.target == '_blank'),
                            linkUrl: item.link,
                            linkText: item.title
                        },
                        class: 'c-list__link'
                    } only %}
                </li>
            {% endfor %}
        </ul>
        {% endif %}

    </section>

    {% if railMaps %}
    <section class="o-section -is-locations">
        <h2 class="u-text-h2">Maps</h2>
        <ul class="c-featured-maps">
            {% for map in railMaps %}
                <li class="c-featured-maps__map u-ratio u-1:1">
                    {% include '_elements/picture.twig' with {
                        params: {
                            src: Image(map.banner_image),
                            ratio: '1:1',
                        }
                    } only %}
                    {% include '_elements/link.twig' with {
                        params: {
                            isExternal: (map.target == '_blank'),
                            linkUrl: map.link,
                            linkText: map.title
                        },
                        class: 'c-featured-maps__link'
                    } only %}
                </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}

    {% if featuredPage %}
    <section class="o-section -is-featured">
        {% if featuredPage.excerpt is defined and featuredPage.excerpt is not empty %}
            {% set content = featuredPage.excerpt %}
        {% else %}
            {% set content = (featuredPage.post_content|slice(0, 180)) ~ '...' %}
        {% endif %}
        {% include '_components/card.twig' with {
            params: {
                thumbnail: Image(featuredPage.banner_image),
                title: featuredPage.title,
                text: content,
                link: featuredPage.link
            }
        } only %}
    </section>
    {% endif %}

{% endblock %}

{% block cta %}
front_page
{% endblock %}
